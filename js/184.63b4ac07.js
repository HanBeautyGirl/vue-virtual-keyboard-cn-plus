(self["webpackChunkvue_virtual_keyboard_cn"]=self["webpackChunkvue_virtual_keyboard_cn"]||[]).push([[184],{3184:function(t,e,l){l(7658),self.addEventListener("message",(t=>{const{method:e,dataKey:l}=t.data;if("init"===e&&(self[l]=Object.freeze(t.data.data),self.dataKey=l),"setCn_input"===e&&n(t),"search"===e){console.time("searchDict");let{key:e}=t.data;const l=self.doubleSpell||{};let n=e,s=n.split("'");const i=l[n.charAt(0)];if(!i)return;if(["an"].includes(s[s.length-1])){let t=s[s.length-2];if(["n"].includes(t.charAt(t.length-1))){let e=t.slice(0,t.length-1);s=[e,t.slice(t.length-1)+s[s.length-1]],n=s.join("'")}}let c=Object.keys(i).filter((t=>{const e=t.split("'"),l=n.split("'"),s=l.length===e.length;if(!s)return;let c=!0;for(let n=0;n<e.length;n++)if(e[n].charAt(0)!=l[n].charAt(0))c=!1;else{const t=e[n].split(""),s=l[n].split("");for(let e=0;e<s.length;e++){if(!s[e])break;t[e]!=s[e]&&(c=!1)}}return c&&s?i[t]:void 0})),a=[],o=[];const r=self.dict;for(let t of c){let e=t.split("'");a.push(i[t].split(","));for(let t of e)r[t]&&o.push(r[t].split(""))}o=Array.from(new Set(o.flat(2))),a=a.flat(2).sort(((t,e)=>{if(e.length>t.length)return-1})).reverse();const f=a.concat(o);console.timeEnd("searchDict"),self.postMessage({method:"search",data:f,cn_input:n})}}),!1);const n=function(t){let{cn_input:e,text:l}=t.data;const n=self.dict;let s=[];for(let o in n){let t=n[o],e=t.split(""),i=e.find((t=>t===l));i&&s.push(o)}let i="";const c=e.split("'");for(let o=0;o<c.length;o++){let t=c[o];for(let e of s){let l=e.split("");for(let n=0;n<l.length;n++)e.charAt(n)===t.charAt(n)&&(i=t)}}let a=c.filter((t=>t!=i)).join("'");self.postMessage({method:"setCn_input",cn_input:a})}}}]);
//# sourceMappingURL=184.63b4ac07.js.map